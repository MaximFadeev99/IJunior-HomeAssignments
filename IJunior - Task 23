using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace CSTest2
{
    internal class Program
    {
        static void Main(string[] args)
        {
            const string CommandSummarize = "sum";
            const string CommandExit = "exit";

            double[] userNumbers = new double[0];
            double userNumbersSum = 0;
            double checkUserInput;
            string userInput;
            bool isLeaving = false;
            string actionOptions = $"Чтобы просуммировать все числа в массиве, введите - {CommandSummarize}\n" +
                $"Чтобы закрыть программу, введите - {CommandExit}";

            while (isLeaving == false)
            {
                Console.SetCursorPosition(0, 8);
                Console.Write("Список чисел в массиве:");

                foreach (double number in userNumbers)
                {
                    Console.Write(number + " ");
                }

                Console.SetCursorPosition(0, 0);
                Console.WriteLine(actionOptions);
                Console.WriteLine();
                Console.Write("Введите число или команду:");
                userInput = Console.ReadLine();

                switch (userInput)
                {                      
                    case CommandSummarize:
                        foreach (double number in userNumbers)
                        {
                            userNumbersSum += number;
                        }

                        Console.SetCursorPosition(0, 9);
                        Console.Write($"Сумма всех чисел в массиве равняется {userNumbersSum}");
                        Console.ReadKey();
                        userNumbersSum = 0;
                        break;

                    case CommandExit:
                        isLeaving = true;
                        break;

                    default:
                        if (double.TryParse(userInput, out checkUserInput) == false)
                        {
                            Console.Write("Ошибка: неверный вид данных!");
                            Console.ReadKey();
                            goto Retry;
                        }

                        double[] tempUserNumbers = new double[userNumbers.Length + 1];

                        for (int i = 0; i < userNumbers.Length; i++)
                        {
                            tempUserNumbers[i] = userNumbers[i];
                        }

                        userNumbers = tempUserNumbers;
                        userNumbers[userNumbers.Length - 1] = Convert.ToDouble(userInput);
                        break;
                }

                Retry:
                Console.Clear();
            }          
        }
    }
}
